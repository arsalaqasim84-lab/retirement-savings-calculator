<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free, mobile-friendly retirement calculator with inflation-adjusted compounding, growth chart, and year-by-year breakdown.">
    <meta name="keywords" content="retirement, savings, calculator, financial planning, investment, compound interest, inflation">
    <title>Retirement Savings Calculator â€” Plan Your Future with Confidence</title>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://arsalaqasim84-lab.github.io/retirement-savings-calculator/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://arsalaqasim84-lab.github.io/retirement-savings-calculator/">
    <meta property="og:title" content="Retirement Savings Calculator â€” Plan Your Future with Confidence">
    <meta property="og:description" content="Free, mobile-friendly retirement calculator with inflation-adjusted compounding, growth chart, and year-by-year breakdown.">
    <meta property="og:image" content="https://arsalaqasim84-lab.github.io/retirement-savings-calculator/og-image.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://arsalaqasim84-lab.github.io/retirement-savings-calculator/">
    <meta property="twitter:title" content="Retirement Savings Calculator â€” Plan Your Future with Confidence">
    <meta property="twitter:description" content="Free, mobile-friendly retirement calculator with inflation-adjusted compounding, growth chart, and year-by-year breakdown.">
    <meta property="twitter:image" content="https://arsalaqasim84-lab.github.io/retirement-savings-calculator/og-image.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Google Analytics 4 Configuration -->
    <script>
        // GA4 Configuration - Only loads if VITE_GA_ID environment variable is set
        window.GA4_ENABLED = false; // Will be set dynamically
        window.GA4_MEASUREMENT_ID = null;
        
        // Check for environment variable (for Vite builds)
        if (typeof import.meta !== 'undefined' && import.meta.env && import.meta.env.VITE_GA_ID) {
            window.GA4_ENABLED = true;
            window.GA4_MEASUREMENT_ID = import.meta.env.VITE_GA_ID;
        }
        
        // GA4 Implementation
        if (window.GA4_ENABLED && window.GA4_MEASUREMENT_ID) {
            // Load GA4 script
            const script = document.createElement('script');
            script.async = true;
            script.src = `https://www.googletagmanager.com/gtag/js?id=${window.GA4_MEASUREMENT_ID}`;
            document.head.appendChild(script);
            
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', window.GA4_MEASUREMENT_ID);
            
            // Track calculator usage
            window.trackCalculatorEvent = function(eventName, parameters = {}) {
                gtag('event', eventName, parameters);
            };
            
            // Show cookie consent banner
            document.addEventListener('DOMContentLoaded', function() {
                showCookieConsent();
            });
        } else {
            // No-op function when GA4 is disabled
            window.trackCalculatorEvent = function() {};
        }
    </script>
    
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header styles */
        .app-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem 1rem;
            text-align: center;
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .app-header h1 {
            color: #1e40af;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .app-header p {
            color: #64748b;
            font-size: 1.1rem;
            font-weight: 500;
        }

        /* Main container */
        .app-container {
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* Main content area */
        .main-content {
            flex: 1;
            min-width: 0;
        }

        /* Calculator styles */
        .retirement-calculator {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .calculator-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 1rem; /* Reduced space below calculator section */
        }

        .calculator-section h2 {
            color: #1e40af;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 700;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .input-group input {
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
            color: #374151;
        }

        .input-group input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
            transform: translateY(-2px);
        }

        .input-group input:hover {
            border-color: #10b981;
        }

        /* Button styles */
        .button-group {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
            box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);
        }

        .btn-secondary:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(107, 114, 128, 0.4);
        }

        /* Feedback button */
        .feedback-section {
            text-align: center;
            margin-top: 1rem;
        }

        .feedback-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #6b7280;
            text-decoration: none;
            font-size: 0.9rem;
            padding: 0.5rem 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        .feedback-link:hover {
            color: #374151;
            border-color: #10b981;
            background: white;
        }

        .feedback-link svg {
            width: 16px;
            height: 16px;
        }

        /* Results styles */
        .results-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 1.5rem; /* Reduced space after results section */
        }

        .results-section h2 {
            color: #1e40af;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 700;
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .result-card {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .result-card.primary {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border-color: #10b981;
        }

        .result-card.primary h3 {
            color: white;
        }

        .result-card h3 {
            color: #374151;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .result-card .amount {
            font-size: 2rem;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 0.5rem;
        }

        .result-card.primary .amount {
            color: white;
        }

        .result-card p {
            color: #6b7280;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .result-card.primary p {
            color: rgba(255, 255, 255, 0.9);
        }

        /* Chart styles */
        .chart-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 1.5rem; /* Reduced spacing after chart */
        }

        .chart-section h2 {
            color: #1e40af;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 700;
        }

        .chart-container {
            background: white;
            border-radius: 16px;
            padding: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            position: relative;
            height: 400px;
            min-height: 400px; /* Prevent layout shift */
        }

        /* Financial Tip of the Day Section */
        .financial-tip-of-day {
            margin: 1rem 0;
            padding: 1.5rem;
        }

        .tip-card {
            background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
            border-radius: 20px;
            padding: 2.5rem;
            text-align: center;
            box-shadow: 0 8px 32px rgba(16, 185, 129, 0.15);
            border: 2px solid #10b981;
            position: relative;
            overflow: hidden;
        }

        .tip-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #059669, #047857);
        }

        .tip-card-title {
            color: #065f46;
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .tip-card-content {
            color: #064e3b;
            font-size: 1.2rem;
            font-weight: 500;
            line-height: 1.7;
            margin: 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Breakdown styles */
        .breakdown-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 0.5rem; /* Reduced space above breakdown section */
        }

        .breakdown-section h2 {
            color: #1e40af;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 700;
        }

        .breakdown-table {
            overflow-x: auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }

        .breakdown-table table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        .breakdown-table th,
        .breakdown-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .breakdown-table th {
            background: #f8fafc;
            color: #374151;
            font-weight: 600;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .breakdown-table td {
            color: #374151;
            font-weight: 500;
        }

        .breakdown-table tr:hover {
            background: #f8fafc;
        }

        /* Footer */
        .app-footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 1.5rem;
            text-align: center;
            color: #64748b;
            font-weight: 500;
            margin-top: auto;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }

        .footer-links {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .footer-links a {
            color: #1e40af;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .footer-links a:hover {
            color: #10b981;
        }

        /* Cookie Consent Banner */
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-top: 2px solid #10b981;
            padding: 1rem;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }

        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .cookie-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        /* Legal Modal */
        .legal-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 1rem;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .modal-header h2 {
            margin: 0;
            color: #1e40af;
            font-size: 1.5rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #64748b;
            padding: 0;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }

        .modal-close:hover {
            background-color: #f1f5f9;
        }

        .modal-body {
            padding: 1.5rem;
            line-height: 1.6;
            color: #374151;
        }

        .modal-body h3 {
            color: #1e40af;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .modal-body p {
            margin-bottom: 1rem;
        }

        .modal-body ul {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
        }

        .modal-body li {
            margin-bottom: 0.5rem;
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            z-index: 3000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            max-width: 300px;
            font-weight: 500;
        }

        .toast.show {
            transform: translateX(0);
        }

        /* Responsive improvements */
        @media (max-width: 768px) {
            .cookie-content {
                flex-direction: column;
                text-align: center;
            }
            
            .footer-links {
                gap: 1rem;
            }
            
            .modal-content {
                margin: 1rem;
                max-height: 90vh;
            }
        }



        /* Loading and Status Message Styles */
        .status-message {
            text-align: center;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1.1rem;
            display: none;
        }

        .status-message.success {
            background-color: #e1f3d8;
            color: #065f46;
            border: 1px solid #a7f3d0;
            display: block;
        }

        .status-message.error {
            background-color: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
            display: block;
        }

        /* Button States */
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .btn-primary:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .btn-primary:hover:not(:disabled) {
            background: #059669;
            transform: translateY(-2px);
        }

        .btn-secondary:hover:not(:disabled) {
            background: #e0e7ff;
            transform: translateY(-2px);
        }

        /* Responsive design */
        @media (max-width: 1024px) {
            .app-container {
                padding: 1rem;
            }
            
            .app-header h1 {
                font-size: 2rem;
            }
        }

        @media (max-width: 768px) {
            .app-header {
                padding: 1.5rem 1rem;
            }
            
            .app-header h1 {
                font-size: 1.8rem;
            }
            
            .app-header p {
                font-size: 1rem;
            }
            
            .app-container {
                padding: 1rem 0.5rem;
            }
            
            .calculator-section,
            .results-section,
            .chart-section,
            .breakdown-section {
                padding: 1.5rem;
                margin: 0 0.5rem;
            }
            
            .input-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .results-summary {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .button-group {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .breakdown-table {
                font-size: 0.9rem;
            }
            
            .breakdown-table th,
            .breakdown-table td {
                padding: 0.75rem 0.5rem;
            }
        }

        @media (max-width: 480px) {
            .app-header h1 {
                font-size: 1.5rem;
            }
            
            .app-container {
                padding: 0.5rem;
            }
            
            .calculator-section,
            .results-section,
            .chart-section,
            .breakdown-section {
                padding: 1rem;
                margin: 0 0.25rem;
            }
            
            .calculator-section h2,
            .results-section h2,
            .chart-section h2,
            .breakdown-section h2 {
                font-size: 1.5rem;
            }
            
            .result-card .amount {
                font-size: 1.5rem;
            }
            
            .input-group input {
                padding: 0.875rem;
                font-size: 0.95rem;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="app">
        <header class="app-header">
            <h1>Retirement Savings Calculator</h1>
            <p>Plan your financial future with confidence</p>
        </header>
        
        <div class="app-container">
            <!-- Main calculator content -->
            <main class="main-content">
                <div class="retirement-calculator">
                    <div class="calculator-section">
                        <h2>Input Your Information</h2>
                        <div class="input-grid">
                            <div class="input-group">
                                <label for="currentAge">Current Age</label>
                                <input type="number" id="currentAge" value="30" min="18" max="100" aria-describedby="currentAgeHelp">
                                <div id="currentAgeHelp" class="sr-only">Enter your current age between 18 and 100</div>
                            </div>

                            <div class="input-group">
                                <label for="retirementAge">Retirement Age Goal</label>
                                <input type="number" id="retirementAge" value="65" min="25" max="100" aria-describedby="retirementAgeHelp">
                                <div id="retirementAgeHelp" class="sr-only">Enter your target retirement age between 25 and 100</div>
                            </div>

                            <div class="input-group">
                                <label for="currentSavings">Current Savings ($)</label>
                                <input type="number" id="currentSavings" value="10000" min="0" step="1000" aria-describedby="currentSavingsHelp">
                                <div id="currentSavingsHelp" class="sr-only">Enter your current savings amount</div>
                            </div>

                            <div class="input-group">
                                <label for="monthlySavings">Monthly Savings ($)</label>
                                <input type="number" id="monthlySavings" value="500" min="0" step="100" aria-describedby="monthlySavingsHelp">
                                <div id="monthlySavingsHelp" class="sr-only">Enter how much you save each month</div>
                            </div>

                            <div class="input-group">
                                <label for="annualReturn">Expected Annual Return (%)</label>
                                <input type="number" id="annualReturn" value="7" min="0" max="20" step="0.1" aria-describedby="annualReturnHelp">
                                <div id="annualReturnHelp" class="sr-only">Enter expected annual investment return percentage</div>
                            </div>

                            <div class="input-group">
                                <label for="inflationRate">Inflation Rate (%)</label>
                                <input type="number" id="inflationRate" value="2.5" min="0" max="10" step="0.1" aria-describedby="inflationRateHelp">
                                <div id="inflationRateHelp" class="sr-only">Enter expected annual inflation rate percentage</div>
                            </div>
                        </div>

                        <div class="button-group">
                            <button onclick="calculateRetirement()" class="btn btn-primary" id="calculateBtn">Calculate</button>
                            <button onclick="resetForm()" class="btn btn-secondary">Reset</button>
                        </div>
                        
                        <div id="statusMessage" class="status-message"></div>

                        <!-- Feedback Section -->
                        <div class="feedback-section">
                            <a href="mailto:feedback@example.com?subject=Retirement%20Savings%20Calculator%20Feedback" class="feedback-link" aria-label="Send feedback about this calculator">
                                <svg fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                                </svg>
                                Send Feedback
                            </a>
                        </div>
                    </div>

                    <!-- Financial Tip of the Day Section - Always Visible -->
                    <div class="financial-tip-of-day">
                        <div class="tip-card">
                            <h3 class="tip-card-title">ðŸ’¡ Financial Tip of the Day</h3>
                            <p class="tip-card-content" id="daily-tip-content"></p>
                        </div>
                    </div>

                    <div id="resultsSection" class="hidden">
                        <div class="results-section">
                            <h2>Your Retirement Projection</h2>
                            
                            <div class="results-summary">
                                <div class="result-card primary">
                                    <h3>Projected Savings at Retirement</h3>
                                    <div class="amount" id="projectedSavings">$0</div>
                                    <p id="retirementAgeText">At age 65</p>
                                </div>

                                <div class="result-card">
                                    <h3>Total Contributions</h3>
                                    <div class="amount" id="totalContributions">$0</div>
                                    <p id="yearsText">Over 0 years</p>
                                </div>

                                <div class="result-card">
                                    <h3>Investment Returns</h3>
                                    <div class="amount" id="totalReturns">$0</div>
                                    <p>Compound growth</p>
                                </div>
                            </div>

                            <div class="button-group">
                                <button onclick="shareResults()" class="btn btn-primary">Share Results</button>
                            </div>
                        </div>

                        <div class="chart-section">
                            <h2>Savings Growth Over Time</h2>
                            <div class="chart-container">
                                <canvas id="savingsChart"></canvas>
                            </div>
                        </div>

                        <div class="breakdown-section">
                            <h2>Year-by-Year Breakdown</h2>
                            <div class="breakdown-table">
                                <table id="breakdownTable">
                                    <thead>
                                        <tr>
                                            <th>Age</th>
                                            <th>Start Balance</th>
                                            <th>Contributions</th>
                                            <th>Returns</th>
                                            <th>End Balance</th>
                                        </tr>
                                    </thead>
                                    <tbody id="breakdownBody">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                

            </main>
        </div>
        
        <!-- Cookie Consent Banner -->
        <div id="cookieConsent" class="cookie-consent hidden">
            <div class="cookie-content">
                <p>We use analytics cookies to understand usage. By continuing, you accept.</p>
                <div class="cookie-buttons">
                    <button onclick="acceptCookies()" class="btn btn-primary">Accept</button>
                    <a href="#privacy" onclick="showPrivacy()" class="btn btn-secondary">Learn More</a>
                </div>
            </div>
        </div>

        <footer class="app-footer">
            <div class="footer-content">
                <p>&copy; 2024 Retirement Savings Calculator. All rights reserved.</p>
                <div class="footer-links">
                    <a href="#privacy" onclick="showPrivacy()">Privacy Policy</a>
                    <a href="#disclaimer" onclick="showDisclaimer()">Disclaimer</a>
                    <a href="mailto:support@example.com?subject=Retirement%20Calculator%20Support">Contact</a>
                </div>
            </div>
        </footer>
    </div>

    <!-- Legal Pages Modal -->
    <div id="legalModal" class="legal-modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Legal Information</h2>
                <button onclick="closeLegalModal()" class="modal-close">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let chart = null;
        let currentResults = null;

        // Chart options for consistent styling
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Projected Savings Growth Over Time'
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        callback: function(value) {
                            return '$' + value.toLocaleString();
                        }
                    }
                }
            }
        };

        // Financial Tips Array
        const financialTips = [
            "Start saving at least 10% of your income each month.",
            "Increase your savings rate by 1% every year.",
            "Review your investment portfolio twice a year.",
            "Automate your savings to stay consistent.",
            "Avoid high-interest debt before focusing on investments.",
            "Diversify your investments across different asset classes.",
            "Take advantage of employer retirement plan matching.",
            "Consider tax-advantaged accounts like IRAs and 401(k)s.",
            "Build an emergency fund covering 3-6 months of expenses.",
            "Don't try to time the market - focus on long-term investing."
        ];

        // Get DOM elements
        const inputs = {
            currentAge: document.getElementById('currentAge'),
            retirementAge: document.getElementById('retirementAge'),
            currentSavings: document.getElementById('currentSavings'),
            monthlySavings: document.getElementById('monthlySavings'),
            annualReturn: document.getElementById('annualReturn'),
            inflationRate: document.getElementById('inflationRate')
        };

        const resultsSection = document.getElementById('resultsSection');
        const projectedSavings = document.getElementById('projectedSavings');
        const totalContributions = document.getElementById('totalContributions');
        const totalReturns = document.getElementById('totalReturns');
        const retirementAgeText = document.getElementById('retirementAgeText');
        const yearsText = document.getElementById('yearsText');
        const breakdownBody = document.getElementById('breakdownBody');
        const calculateBtn = document.getElementById('calculateBtn');
        const statusMessage = document.getElementById('statusMessage');
        const dailyTipContent = document.getElementById('daily-tip-content');

        // Add event listeners to all inputs
        Object.values(inputs).forEach(input => {
            input.addEventListener('input', function() {
                // Clear previous results when user starts typing
                if (resultsSection.classList.contains('hidden') === false) {
                    resultsSection.classList.add('hidden');
                    if (chart) {
                        chart.destroy();
                        chart = null;
                    }
                }
                
                // Check if ready to calculate
                checkReadyToCalculate();
            });
        });

        // Check if all fields are filled and ready to calculate
        function checkReadyToCalculate() {
            const currentAge = parseFloat(inputs.currentAge.value) || 0;
            const retirementAge = parseFloat(inputs.retirementAge.value) || 0;
            const currentSavings = parseFloat(inputs.currentSavings.value) || 0;
            const monthlySavings = parseFloat(inputs.monthlySavings.value) || 0;
            const annualReturn = parseFloat(inputs.annualReturn.value) || 0;
            const inflationRate = parseFloat(inputs.inflationRate.value) || 0;

            if (currentAge && retirementAge && currentSavings !== undefined && monthlySavings !== undefined && annualReturn !== undefined && inflationRate !== undefined) {
                if (retirementAge > currentAge && currentAge >= 16 && retirementAge <= 100 && annualReturn >= 0 && inflationRate >= 0) {
                    statusMessage.textContent = 'Ready to calculate! Click the Calculate button.';
                    statusMessage.classList.add('success');
                    statusMessage.classList.remove('error');
                    calculateBtn.disabled = false;
                } else {
                    statusMessage.textContent = 'Please check your inputs.';
                    statusMessage.classList.add('error');
                    statusMessage.classList.remove('success');
                    calculateBtn.disabled = true;
                }
            } else {
                statusMessage.textContent = 'Please fill in all fields.';
                statusMessage.classList.add('error');
                statusMessage.classList.remove('success');
                calculateBtn.disabled = true;
            }
        }

        // Display random financial tip
        function displayDailyTip() {
            const randomIndex = Math.floor(Math.random() * financialTips.length);
            dailyTipContent.textContent = financialTips[randomIndex];
        }

        // Auto-change tip every 30 seconds
        function startTipRotation() {
            setInterval(() => {
                displayDailyTip();
            }, 30000); // 30 seconds = 30000 milliseconds
        }

        // Calculate retirement savings
        function calculateRetirement() {
            // Change financial tip when calculating
            displayDailyTip();
            
            const currentAge = parseFloat(inputs.currentAge.value) || 0;
            const retirementAge = parseFloat(inputs.retirementAge.value) || 0;
            const currentSavings = parseFloat(inputs.currentSavings.value) || 0;
            const monthlySavings = parseFloat(inputs.monthlySavings.value) || 0;
            const annualReturn = parseFloat(inputs.annualReturn.value) || 0;
            const inflationRate = parseFloat(inputs.inflationRate.value) || 0;

            // Clear previous status
            statusMessage.textContent = '';
            statusMessage.classList.remove('success', 'error');

            // Validate inputs
            if (!currentAge || !retirementAge || currentSavings === undefined || !monthlySavings || !annualReturn || inflationRate === undefined) {
                statusMessage.textContent = 'Please fill in all required fields.';
                statusMessage.classList.add('error');
                return;
            }

            if (retirementAge <= currentAge) {
                statusMessage.textContent = 'Retirement age must be greater than current age.';
                statusMessage.classList.add('error');
                return;
            }

            if (currentAge < 16 || retirementAge > 100) {
                statusMessage.textContent = 'Please enter realistic ages (16-100).';
                statusMessage.classList.add('error');
                return;
            }

            if (annualReturn < 0 || inflationRate < 0) {
                statusMessage.textContent = 'Rates cannot be negative.';
                statusMessage.classList.add('error');
                return;
            }

            if (currentAge && retirementAge && currentSavings !== undefined) {
                const yearsToRetirement = retirementAge - currentAge;
                const monthlyReturn = annualReturn / 100 / 12;
                const monthlyInflation = inflationRate / 100 / 12;

                let projectedSavings = currentSavings;
                const yearlyBreakdown = [];
                const chartLabels = [];
                const chartValues = [];

                for (let year = 0; year <= yearsToRetirement; year++) {
                    const yearStart = projectedSavings;
                    
                    // Calculate monthly contributions and returns for the year
                    for (let month = 1; month <= 12; month++) {
                        projectedSavings += monthlySavings;
                        projectedSavings *= (1 + monthlyReturn);
                        // Apply inflation adjustment
                        projectedSavings *= (1 - monthlyInflation);
                    }

                    yearlyBreakdown.push({
                        year: currentAge + year,
                        startBalance: yearStart,
                        endBalance: projectedSavings,
                        contributions: monthlySavings * 12,
                        returns: projectedSavings - yearStart - (monthlySavings * 12)
                    });

                    chartLabels.push(`Age ${currentAge + year}`);
                    chartValues.push(Math.round(projectedSavings));
                }

                const totalContributions = monthlySavings * 12 * yearsToRetirement;
                const totalReturns = projectedSavings - currentSavings - totalContributions;

                // Store results
                currentResults = {
                    projectedSavings: Math.round(projectedSavings),
                    totalContributions,
                    totalReturns,
                    yearlyBreakdown,
                    yearsToRetirement
                };

                // Update UI
                updateResults();
                updateChart(chartLabels, chartValues);
                updateBreakdownTable(yearlyBreakdown);
                
                // Show results
                resultsSection.classList.remove('hidden');
                statusMessage.textContent = 'Calculations complete!';
                statusMessage.classList.add('success');
                statusMessage.classList.remove('error');

                // Track calculator usage
                window.trackCalculatorEvent('calculator_used', {
                    current_age: currentAge,
                    retirement_age: retirementAge,
                    years_to_retirement: yearsToRetirement
                });
            }
        }

        // Update results display
        function updateResults() {
            if (!currentResults) return;
            
            projectedSavings.textContent = `$${currentResults.projectedSavings.toLocaleString()}`;
            totalContributions.textContent = `$${currentResults.totalContributions.toLocaleString()}`;
            totalReturns.textContent = `$${currentResults.totalReturns.toLocaleString()}`;
            retirementAgeText.textContent = `At age ${inputs.retirementAge.value}`;
            yearsText.textContent = `Over ${currentResults.yearsToRetirement} years`;
        }

        // Update chart with lazy initialization
        function updateChart(labels, values) {
            if (!chart) {
                // Lazy initialize chart only when first calculation is made
                const ctx = document.getElementById('savingsChart').getContext('2d');
                chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Projected Savings',
                            data: values,
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: chartOptions
                });
            } else {
                // Update existing chart data for better performance
                chart.data.labels = labels;
                chart.data.datasets[0].data = values;
                chart.update('none'); // Update without animation for better performance
            }
        }

        // Update breakdown table
        function updateBreakdownTable(breakdown) {
            breakdownBody.innerHTML = '';
            
            breakdown.forEach(year => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${year.year}</td>
                    <td>$${year.startBalance.toLocaleString()}</td>
                    <td>$${year.contributions.toLocaleString()}</td>
                    <td>$${year.returns.toLocaleString()}</td>
                    <td>$${year.endBalance.toLocaleString()}</td>
                `;
                breakdownBody.appendChild(row);
            });
        }

        // Reset form
        function resetForm() {
            // Change financial tip when resetting
            displayDailyTip();
            
            inputs.currentAge.value = 30;
            inputs.retirementAge.value = 65;
            inputs.currentSavings.value = 10000;
            inputs.monthlySavings.value = 500;
            inputs.annualReturn.value = 7;
            inputs.inflationRate.value = 2.5;
            
            resultsSection.classList.add('hidden');
            if (chart) {
                chart.destroy();
                chart = null;
            }
            statusMessage.textContent = ''; // Clear status message on reset
            statusMessage.classList.remove('success', 'error'); // Clear status classes

            // Track reset action
            window.trackCalculatorEvent('calculator_reset');
        }

        // Share results
        function shareResults() {
            if (!currentResults) return;
            
            const shareData = {
                title: 'My Retirement Savings Projection',
                text: `I'm projected to have $${currentResults.projectedSavings.toLocaleString()} at retirement! Check out this calculator: ${window.location.href}`,
                url: window.location.href
            };
            
            if (navigator.share) {
                navigator.share(shareData).then(() => {
                    showToast('Results shared successfully!');
                }).catch(() => {
                    copyToClipboard(shareData.text);
                });
            } else {
                copyToClipboard(shareData.text);
            }

            // Track share action
            window.trackCalculatorEvent('results_shared');
        }

        // Copy to clipboard with toast notification
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showToast('Results copied to clipboard!');
            }).catch(() => {
                showToast('Unable to copy to clipboard. Please share manually.');
            });
        }

        // Show toast notification
        function showToast(message) {
            // Create toast element
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Show toast
            setTimeout(() => toast.classList.add('show'), 100);
            
            // Hide and remove toast
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        // Initialize calculator
        checkReadyToCalculate();
        displayDailyTip(); // Display initial financial tip of the day
        startTipRotation(); // Start automatic tip rotation every 30 seconds

        // Cookie consent functions
        function showCookieConsent() {
            if (!localStorage.getItem('cookiesAccepted') && window.GA4_ENABLED) {
                document.getElementById('cookieConsent').classList.remove('hidden');
            }
        }

        function acceptCookies() {
            localStorage.setItem('cookiesAccepted', 'true');
            document.getElementById('cookieConsent').classList.add('hidden');
        }

        // Legal modal functions
        function showPrivacy() {
            document.getElementById('modalTitle').textContent = 'Privacy Policy';
            document.getElementById('modalBody').innerHTML = `
                <h3>Privacy Policy</h3>
                <p>We respect your privacy. This site does not collect personal information unless you choose to contact us. Anonymous usage data may be measured to improve the experience (e.g., page views).</p>
                <p>If analytics is enabled, we do not sell or share your data. You can request removal of any information you intentionally provided by emailing us.</p>
                <p><strong>Contact:</strong> <a href="mailto:support@example.com?subject=Privacy%20Request">support@example.com</a></p>
            `;
            document.getElementById('legalModal').classList.remove('hidden');
        }

        function showDisclaimer() {
            document.getElementById('modalTitle').textContent = 'Disclaimer';
            document.getElementById('modalBody').innerHTML = `
                <h3>Important Disclaimer</h3>
                <p>This tool is for educational purposes only and is not financial advice. Results are estimates based on your inputs and assumptions.</p>
                <p><strong>Always consult a qualified financial advisor before making financial decisions.</strong></p>
                <p>The calculator provides projections based on:</p>
                <ul>
                    <li>Your current savings and monthly contributions</li>
                    <li>Expected annual return rates</li>
                    <li>Inflation assumptions</li>
                    <li>Your target retirement age</li>
                </ul>
                <p>These projections are estimates and actual results may vary significantly due to market conditions, tax changes, and other factors.</p>
            `;
            document.getElementById('legalModal').classList.remove('hidden');
        }

        function closeLegalModal() {
            document.getElementById('legalModal').classList.add('hidden');
        }
    </script>

    <!-- 
    ========================================
    FUTURE MONETIZATION - AD INSERTION POINTS
    ========================================
    
    The following sections are prepared for future AdSense integration:
    
    1. AD BETWEEN SECTIONS (Chart and Breakdown) - REPLACED WITH FINANCIAL TIP OF THE DAY
       - Class: financial-tip-of-day
       - Location: Between chart and year-by-year breakdown
       - Size: Responsive, adapts to container width
       - Note: This area now displays helpful financial tips instead of ads
       
    2. AD BELOW RESULTS - REMOVED
       - Note: This area has been removed for a cleaner design
    
    To add AdSense:
    1. Replace the placeholder divs with your ad code
    2. Ensure ad dimensions are responsive
    3. Test on mobile and desktop
    4. Update ad refresh rates as needed
    
    Example AdSense snippet:
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXX"></script>
    <ins class="adsbygoogle ad-between-sections" style="display:block" data-ad-client="ca-pub-XXXXXXXXXX" data-ad-slot="XXXXXXXXXX" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    -->
</body>
</html>